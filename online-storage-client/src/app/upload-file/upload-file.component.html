<div class="uploadFile">

  <div *ngIf="uploading" class="m-5">
    <h3 class="text-primary">Uploading {{progress}}</h3>
    <p>Please wait while file is being uploaded</p>
  </div>

  <div id="main">
    <div class="d-flex flex-row-reverse p-1">
      <button class="btn btn-sm btn-secondary ml-1"
        (click)="closeModel()">
        <fa-icon [icon]="faWindowClose"></fa-icon>
      </button>
      <button class="btn btn-sm btn-secondary ml-1"
        (click)="toggleHelp()">
        <fa-icon [icon]="faInfo"></fa-icon>
      </button>
    </div>

    <div *ngIf="!help">
      <div *ngIf="errorMessage" class="alert alert-danger">
        {{errorMessage}}
      </div>

      <h4>Upload a new file</h4>
      <form (ngSumbit)="upload()" #form="ngForm" id="uploadForm">
        <div class="form-group">
          <label for="file">File</label>
          <input type="file" name="file" id="file" class="form-control"
            [(ngModel)]="file" #fileModel="ngModel" required>
          <div *ngIf="fileModel.invalid && (fileModel.dirty && fileModel.touched)"
            class="text-muted">
            <div *ngIf="fileModel.errors.required">
                Please choose a file
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="targetName">Target Name</label>
          <input type="text" name="targetName" class="form-control"
            [(ngModel)]="fileName" #filename="ngModel">
          <div *ngIf="!(filename.dirty || filename.touched)">
            Please enter a name to save as a new name
          </div>
          <div *ngIf="!validateFileName() && (filename.dirty || filename.touched)"
            class="alert alert-danger">
            <div *ngIf="!validateFileName()">
              File name is not valid, try another
            </div>
          </div>
        </div>
        <input (click)="upload()" type="submit" class="btn btn-sm btn-success ml-1"
          [disabled]="!form.valid || (fileName && !validateFileName())"
          value="Upload">
      </form>
      <div class="alert alert-secondary p-1">
        <h6>Selected files: </h6>
      </div>
    </div>

    <div *ngIf="help" class="p-2">
      <ul>
        <li>Upload file window let you upload one or more files.</li>
        <li>To upload a file, use 'Select File' input box.</li>
        <li>One you select a file, it is added to selected file.
          Now you can choose another!</li>
        <li>Select files are always there at bottom, so you may remove one
          or more of them, if you wish to cancel them.
        </li>
      </ul>
      <p class="alert-warning p-2">Click on info button again to close help.</p>
    </div>
  </div>
</div>
